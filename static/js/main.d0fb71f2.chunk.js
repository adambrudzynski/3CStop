(this.webpackJsonp3cstop=this.webpackJsonp3cstop||[]).push([[0],{183:function(e,t,a){e.exports=a(349)},188:function(e,t,a){},348:function(e,t,a){},349:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(37),o=a.n(r),l=(a(188),a(24)),s=a.n(l),i=a(38),u=a(18),p=a(363),m=a(358),d=a(361);var f=a(75),h=a.n(f),g=a(55),E=function(e){var t="".concat("https://cors-anywhere.herokuapp.com/","http://ztm.gda.pl/rozklady/pobierz_SIP.php?n[0]=").concat(e);return fetch(t).then((function(e){var t=e.headers.get("content-type"),a=t.substring(t.indexOf("charset=")+8);return e.arrayBuffer().then((function(e){var t=new DataView(e);return new TextDecoder(a).decode(t).replace('<p style="font-size: 8pt; font-style:italic;margin-top: 0;text-align:center;">\u0179r\xf3d\u0142o danych: narz\u0119dzie oprogramowania SIP opracowane przez <a href="http://www.gmv.com">GMV</a></p>',"")}))}))},v=function(){var e=Object(i.a)(s.a.mark((function e(t){var a,n,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,"https://cors-anywhere.herokuapp.com/",a="".concat("https://cors-anywhere.herokuapp.com/","https://zkmgdynia.pl/stopsAPI/getDisplay/").concat(t),e.next=5,h.a.get(a);case 5:return n=e.sent,c=n.data,e.abrupt("return",c.delay);case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),b=function(e){var t=e.stop,a=e.stopid,n=t.map((function(e){return c.a.createElement("tr",{key:e.delay+a},c.a.createElement("td",null,e.shortName),c.a.createElement("td",null,e.headSign),c.a.createElement("td",null,e.delayDesc))}));return c.a.createElement("div",null,c.a.createElement("table",null,c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",null,"Linia"),c.a.createElement("th",{style:{minWidth:"200px"}},"Kierunek"),c.a.createElement("th",null,"Odjazd"))),c.a.createElement("tbody",null,n)))},y=a(362),k=function(e){var t=e.stopId,a=Object(n.useState)(null),r=Object(u.a)(a,2),o=r[0],l=r[1],p=Object(n.useState)(null),m=Object(u.a)(p,2),d=m[0],f=m[1],h=Object(n.useState)(!1),g=Object(u.a)(h,2),k=g[0],w=g[1],O=Object(n.useState)(null),j=Object(u.a)(O,2);j[0],j[1];Object(n.useEffect)((function(){t<3e4?z(t):x(t)}),[t]);var z=function(){var e=Object(i.a)(s.a.mark((function e(t){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w(!0),e.next=3,E(t);case 3:a=e.sent,l({__html:a}),w(!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(i.a)(s.a.mark((function e(t){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w(!0),e.next=3,v(t);case 3:a=e.sent,f(a),w(!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=c.a.createElement(y.a,null,c.a.createElement(y.a.Line,null),c.a.createElement(y.a.Line,null),c.a.createElement(y.a.Line,null),c.a.createElement(y.a.Line,null),c.a.createElement(y.a.Line,null));return k?c.a.createElement(c.a.Fragment,null,"   ",I):d?c.a.createElement(b,{stopid:t,stop:d}):c.a.createElement("div",{dangerouslySetInnerHTML:o})},w=function(e){var t=e.stop,a=Object(n.useState)(!0),r=Object(u.a)(a,2),o=r[0],l=r[1];return c.a.createElement(n.Fragment,{key:t.stopId},c.a.createElement(d.a.Title,{key:t.stopId+"title",active:!o,onClick:function(){l(!o),console.log(t)}},t.stopId>=3e4?c.a.createElement(c.a.Fragment,null,c.a.createElement(g.a,{size:"tiny",color:"blue",content:"ZKM"}),t.stopDesc," ",t.distance,t.stopCode&&c.a.createElement(g.a,{circular:!0,size:"tiny",content:t.stopCode})):c.a.createElement(c.a.Fragment,null,c.a.createElement(g.a,{size:"tiny",color:"red",content:"ZTM"}),t.stopDesc," ",t.distance,t.stopCode&&c.a.createElement(g.a,{circular:!0,size:"tiny",content:t.stopCode}))),c.a.createElement(d.a.Content,{key:t.stopId+"content",active:!o},!o&&c.a.createElement(k,{stopId:t.stopId})))},O=a(364),j=a(357),z=a(39),x=a(360),I=a(350),S={type:"grey",message:""},C=function(e){var t=e.location,a=Object(n.useState)(S),r=Object(u.a)(a,2),o=(r[0],r[1]),l={enableHighAccuracy:!0,timeout:5e3,maximumAge:0},s=function(e){var a=e.coords;o({type:"green",message:"".concat(a.latitude,", ").concat(a.longitude)}),t([a.latitude,a.longitude]),console.log("Your current position is:"),console.log("Latitude : ".concat(a.latitude)),console.log("Longitude: ".concat(a.longitude)),console.log("More or less ".concat(a.accuracy," meters."))},i=function(e){o({type:"red",message:"ERROR(".concat(e.code,"): ").concat(e.message)}),console.warn("ERROR(".concat(e.code,"): ").concat(e.message))};return c.a.createElement(I.a,{basic:!0,icon:"location arrow",onClick:function(){navigator.geolocation.getCurrentPosition(s,i,l)}})},L=function(e){var t=e.search,a=e.name,n=e.operator,r=e.handleOperator,o=e.location;return c.a.createElement(O.a,{compact:!0,borderless:!0,fixed:"bottom"},c.a.createElement(O.a.Item,{fitted:!0},c.a.createElement(C,{location:o})),c.a.createElement(O.a.Item,{fitted:!0},c.a.createElement(j.a,{placeholder:"Wyszukaj...",name:"search",icon:a.length>0&&c.a.createElement(z.a,{name:"cancel",circular:!0,link:!0,onClick:function(){t("")}}),value:a,onChange:function(e){var a=e.target;t(a.value.toLowerCase())}})),c.a.createElement(O.a.Item,{fitted:!0,position:"right"},c.a.createElement(x.a,{compact:!0,placeholder:"Przewo\u017anik",selection:!0,options:[{key:"ztm",text:"ZTM Gda\u0144sk",value:"ztm"},{key:"zkm",text:"ZKM Gdynia",value:"zkm"},{key:"all",text:"Wszyscy",value:"all"}],onChange:function(e,t){var a=t.value;console.log(a),r(a)},value:n})))},D=(a(153),function(e,t){var a=e.stopDesc.toUpperCase(),n=t.stopDesc.toUpperCase(),c=0;return a>n?c=1:a<n&&(c=-1),c}),M=function(){var e=new Date,t=""+(e.getMonth()+1),a=""+e.getDate(),n=e.getFullYear();return t.length<2&&(t="0"+t),a.length<2&&(a="0"+a),[n,t,a].join("-")}(),F=function(){var e=Object(n.useState)([]),t=Object(u.a)(e,2),r=t[0],o=t[1],l=Object(n.useState)(!1),f=Object(u.a)(l,2),g=f[0],E=f[1],v=Object(n.useState)(null),b=Object(u.a)(v,2),y=b[0],k=b[1],O=Object(n.useState)(""),j=Object(u.a)(O,2),z=j[0],x=j[1],I=Object(n.useState)("all"),S=Object(u.a)(I,2),C=S[0],F=S[1],P=Object(n.useState)(null),R=Object(u.a)(P,2),T=R[0],W=R[1];Object(n.useEffect)((function(){Z()}),[]);var Z=function(){var e=Object(i.a)(s.a.mark((function e(){var t,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,E(!0),"https://ckan.multimediagdansk.pl/dataset/c24aa637-3619-4dc2-a171-a23eec8f2172/resource/4c4025f0-01bf-41f7-a39f-d156d201b82b/download/stops.json",e.next=5,h.a.get("https://ckan.multimediagdansk.pl/dataset/c24aa637-3619-4dc2-a171-a23eec8f2172/resource/4c4025f0-01bf-41f7-a39f-d156d201b82b/download/stops.json");case 5:t=e.sent,a=t.data,o(a[M].stops),E(!1),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),k(e.t0),E(!1);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),A=a(153),B=r.sort(D).filter((function(e){return"all"===C?e:"ztm"===C&&e.stopId<3e4?e:"zkm"===C&&e.stopId>=3e4?e:void 0})).filter((function(e){return e.stopDesc.toLowerCase().includes(z)})).map((function(e){return T?(e.distance=A(T).to([e.stopLat,e.stopLon]).in("m"),e):e})).map((function(e){return c.a.createElement(w,{key:e.stopId+"accordition",stop:e})}));return g?c.a.createElement(c.a.Fragment,null,c.a.createElement(p.a,{active:!0,inverted:!0},c.a.createElement(m.a,{inverted:!0,size:"big",content:"Pobieranie listy przystank\xf3w"}))):y?c.a.createElement("h1",null,"Error!"):c.a.createElement(c.a.Fragment,null,c.a.createElement(L,{search:function(e){x(e)},handleOperator:function(e){F(e)},operator:C,name:z,location:function(e){W(e)}}),c.a.createElement(d.a,{fluid:!0,styled:!0},B))},P=(a(347),a(348),function(){return c.a.createElement("div",{className:"main"},c.a.createElement(F,{key:"list"}))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(P,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[183,1,2]]]);
//# sourceMappingURL=main.d0fb71f2.chunk.js.map